<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade Calculator</title>
    <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>
</head>
<body>
    <h1>Grade Calculator</h1>
    <p>Enter your Prelim grade to calculate the required Midterm and Final grades to achieve a passing grade of 75.</p>
    <p>If you're aiming for the Dean's Lister (subject grade > 90), you'll see the required grades for that as well.</p>

    <label for="prelim-grade">Prelim Grade (0-100): </label>
    <input type="text" id="prelim-grade" /><br><br>

    <input type="checkbox" id="randomize" />
    <label for="randomize">Randomize Results</label><br><br>

    <button onclick="calculateGrades()">Calculate</button>

    <h2>Results:</h2>
    <div id="result"></div>

    <py-script>
        def calculate_grades(prelim, randomize=False):
            try:
                prelim = float(prelim)
                if not (0 <= prelim <= 100):
                    return "Please enter a valid Prelim grade between 0 and 100."

                # Target final grade is 75 for passing, 90 for Dean's Lister
                passing_grade = 75
                deans_grade = 90

                # Grade weights
                prelim_weight = 0.20
                midterm_weight = 0.30
                final_weight = 0.50

                # Calculate necessary midterm and final grades for passing
                remaining_passing = passing_grade - prelim * prelim_weight
                required_midterm = (remaining_passing / (midterm_weight + final_weight)) / (midterm_weight / final_weight)
                required_final = (remaining_passing - required_midterm * midterm_weight) / final_weight

                # Calculate necessary midterm and final grades for Dean's Lister
                remaining_deans = deans_grade - prelim * prelim_weight
                required_midterm_deans = (remaining_deans / (midterm_weight + final_weight)) / (midterm_weight / final_weight)
                required_final_deans = (remaining_deans - required_midterm_deans * midterm_weight) / final_weight

                if randomize:
                    import random
                    required_midterm = random.uniform(50, 100)
                    required_final = random.uniform(50, 100)
                    required_midterm_deans = random.uniform(80, 100)
                    required_final_deans = random.uniform(80, 100)

                return f"""
                    Prelim Grade: {prelim}
                    Required Midterm Grade: {required_midterm:.2f}
                    Required Final Grade: {required_final:.2f}
                    To qualify for Dean's Lister: 
                    Required Midterm Grade: {required_midterm_deans:.2f}
                    Required Final Grade: {required_final_deans:.2f}
                """
            except ValueError:
                return "Please enter a valid numeric grade."

        def calculateGrades():
            prelim_grade = Element("prelim-grade").element.value
            randomize = Element("randomize").element.checked
            result = calculate_grades(prelim_grade, randomize)
            Element("result").element.innerHTML = result
    </py-script>
</body>
</html>